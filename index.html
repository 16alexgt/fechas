<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Fechas</title>
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        body {
            background-color: #f8f9fa; 
        }
        .container {
            max-width: 600px; 
            margin-top: 50px; 
        }
        .result-item {
            background-color: #e2f0d9; 
            border: 1px solid #c3e6cb; 
        }
        .btn-primary {
            background-color: #28a745; 
            border-color: #28a745;
        }
        .btn-primary:hover {
            background-color: #218838; 
            border-color: #1e7e34; 
        }
        h1 {
            color: #155724; 
        }
        .icon {
            margin-right: 10px; 
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center"><i class="fas fa-piggy-bank icon"></i>Calculadora de Fechas para la Granja</h1>
        <form id="dateForm" class="mt-4">
            <div class="form-group">
                <label for="fecha">Ingrese una fecha:</label>
                <input type="date" id="fecha" name="fecha" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-primary btn-block">Calcular</button>
        </form>

        <!-- Modal -->
        <div class="modal fade" id="resultModal" tabindex="-1" role="dialog" aria-labelledby="resultModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="resultModalLabel">Resultados</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <ul class="list-group" id="resultList">
                            <!-- Resultados se insertarán aquí -->
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Incluir Bootstrap JS y dependencias (opcional) -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function() {
            $('#dateForm').on('submit', function(event) {
                event.preventDefault(); // Evitar el envío del formulario

                // Obtener la fecha ingresada
                const fechaIngresada = $('#fecha').val();
                const fecha = new Date(fechaIngresada);

                if (!isNaN(fecha.getTime())) {
                    // Calcular las fechas
                    const fecha100Dias = new Date(fecha);
                    fecha100Dias.setDate(fecha100Dias.getDate() + 100);

                    const fecha80Dias = new Date(fecha);
                    fecha80Dias.setDate(fecha80Dias.getDate() + 85);

                    const fechaParto = new Date(fecha);
                    fechaParto.setDate(fechaParto.getDate() + 114);

                    // Función para formatear la fecha en español
                    function formatearFechaEnEspañol(fecha) {
                        const dias = ['domingo', 'lunes', 'martes', 'miércoles', 'jueves', 'viernes', 'sábado'];
                        const meses = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];

                        const diaSemana = dias[fecha.getDay()];
                        const diaMes = fecha.getDate();
                        const mes = meses[fecha.getMonth()];
                        const año = fecha.getFullYear();

                        return `${diaSemana}, ${diaMes} de ${mes} de ${año}`;
                    }

                    // Mostrar los resultados en el modal
                    $('#resultList').html('');
                    $('#resultList').append(`<li class="list-group-item result-item">Fecha Purga 100 días: ${formatearFechaEnEspañol(fecha100Dias)}</li>`);
                    $('#resultList').append(`<li class="list-group-item result-item">Fecha Coli: ${formatearFechaEnEspañol(fecha80Dias)}</li>`);
                    $('#resultList').append(`<li class="list-group-item result-item">Fecha de parto: ${formatearFechaEnEspañol(fechaParto)}</li>`);
                    $('#resultModalLabel').text(`Resultados - ${formatearFechaEnEspañol(fecha)}`);
                    $('#resultModal').modal('show');
                } else {
                    alert('La fecha ingresada no es válida, intenta de nuevo.');
                }
            });
        });
    </script>
</body>
</html>
