<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Fechas para la Granja</title>
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        body {
            background-color: #f0f8e4; /* Color suave que evoca un ambiente rural */
            font-family: 'Arial', sans-serif;
        }
        .container {
            max-width: 500px; 
            margin-top: 50px; 
            background-color: #ffffff; /* Fondo blanco para el formulario */
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #4a7c2a; /* Verde oscuro */
            text-align: center;
            margin-bottom: 20px;
        }
        .btn-primary {
            background-color: #4a7c2a; 
            border-color: #4a7c2a;
        }
        .btn-primary:hover {
            background-color: #3b6a23; 
            border-color: #3b6a23; 
        }
        .modal-header {
            background-color: #4a7c2a; 
            color: white;
        }
        .result-item {
            background-color: #e2f0d9; 
            border: 1px solid #c3e6cb; 
        }
        .footer {
            text-align: center;
            margin-top: 20px;
            font-size: 0.9em;
            color: #777;
        }

        /* Estilos del cerdo */
        .piggy-wrapper {
            position: relative;
            width: 150px; /* Ancho reducido */
            height: 150px; /* Alto reducido */
            display: block;
            margin: 0 auto;
            margin-top: 20px; /* Espacio superior */
        }

        .piggy-wrap {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 10;
            width: 100%;
            height: 100%;
            transform-origin: bottom center;
            animation: trembling 5s linear infinite;
        }

        @keyframes trembling {
            0%, 19%, 21%, 23%, 25%, 27%, 29%, 30%, 60%, 61%, 100% {
                transform: scale(1);
            }
            22%, 24%, 26%, 28%, 30% {
                transform: scale(0.99);
            }
        }

        .piggy {
            position: absolute;
            bottom: 20px; /* Ajuste de posición */
            left: 50%;
            margin-left: -75px; /* Ajuste de margen */
            width: 120px; /* Ancho reducido */
            height: 90px; /* Alto reducido */
            display: block;
            border-radius: 100px;
            background-color: #d88fa0;
        }

        .nose {
            position: absolute;
            top: 30px; /* Ajuste de posición */
            left: -10px; /* Ajuste de posición */
            width: 20px; /* Ancho reducido */
            height: 30px; /* Alto reducido */
            display: block;
            background-color: #d88fa0;
            z-index: 1;
            border-radius: 4px;
        }

        .mouth {
            position: absolute;
            top: 40px; /* Ajuste de posición */
            left: -8px; /* Ajuste de posición */
            width: 0;
            height: 0;
            z-index: 8;
            display: block;
            border-bottom: 30px solid #d88fa0; /* Ajuste de tamaño */
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-radius: 4px;
        }

        .ear {
            position: absolute;
            top: -20px; /* Ajuste de posición */
            left: 30px; /* Ajuste de posición */
            width: 25px; /* Ancho reducido */
            height: 20px; /* Alto reducido */
            display: block;
            border-top-right-radius: 60px;
            background-color: #d88fa0;
            z-index: 1;
        }

        .piggy:before {
            position: absolute;
            content: '';
            top: -15px; /* Ajuste de posición */
            left: 25px; /* Ajuste de posición */
            width: 30px; /* Ancho reducido */
            height: 30px; /* Alto reducido */
            display: block;
            border-top-right-radius: 60px;
            background-color: #cb6980;
            z-index: -1;
        }

        .tail {
            position: absolute;
            left: 120px; /* Ajuste de posición */
            top: 50px; /* Ajuste de posición */
        }

        .tail span {
            position: absolute;
            left: 0;
            top: 0;
            width: 10px; /* Ancho reducido */
            height: 3px; /* Alto reducido */
            transform: rotate(30deg);
            background-color: #d88fa0;
        }

        .tail span:nth-child(2) {
            left: 1px;
            top: -20px; /* Ajuste de posición */
            width: 25px; /* Ancho reducido */
            height: 25px; /* Alto reducido */
            transform: rotate(-20deg);
            background-color: transparent;
            border-radius: 50%;
            border-width: 3px;
            border-style: solid;
            border-color: transparent #d88fa0 #d88fa0 transparent;
        }

        .tail span:nth-child(3) {
            left: 10px;
            top: -18px; /* Ajuste de posición */
            width: 15px; /* Ancho reducido */
            height: 15px; /* Alto reducido */
            transform: rotate(-40deg);
            background-color: transparent;
            border-radius: 50%;
            border-width: 3px;
            border-style: solid;
            border-color: #d88fa0 transparent transparent #d88fa0;
        }

        .tail span:nth-child(4) {
            left: 3px;
            top: -30px; /* Ajuste de posición */
            width: 30px; /* Ancho reducido */
            height: 30px; /* Alto reducido */
            transform: rotate(-40deg);
            background-color: transparent;
            border-radius: 50%;
            border-width: 3px;
            border-style: solid;
            border-color: transparent transparent #d88fa0 transparent;
        }

        .eye {
            position: absolute;
            left: 15px; /* Ajuste de posición */
            top: 30px; /* Ajuste de posición */
            width: 15px; /* Ancho reducido */
            height: 15px; /* Alto reducido */
            transform: rotate(45deg);
            border-radius: 50%;
            border-width: 2px;
            border-style: solid;
            border-color: #555 transparent transparent #555;
            animation: blink 5s linear infinite;
        }

        @keyframes blink {
            0%, 19% {
                border-color: #555 transparent transparent #555;
            }
            20%, 60% {
                border-color: transparent #555 #555 transparent;
            }
            61%, 100% {
                border-color: #555 transparent transparent #555;
            }
        }

        .hole {
            position: absolute;
            left: 50px; /* Ajuste de posición */
            top: 0;
            width: 30px; /* Ancho reducido */
            height: 3px; /* Alto reducido */
            background-color: #555;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
        }

        .coin-wrap {
            position: absolute;
            top: 0;
            left: -8px;
            z-index: 9;
            width: 100%;
            height: 100%;
            opacity: 0;
            transform-origin: bottom center;
            animation: trembling 5s linear infinite, moveCoin 5s linear infinite;
        }

        .coin {
            position: absolute;
            top: 50px; /* Ajuste de posición */
            left: 50px; /* Ajuste de posición */
            z-index: 9;
            width: 30px; /* Ancho reducido */
            height: 30px; /* Alto reducido */
            border-radius: 50%;
            border: 3px solid #e67e22;
            background-color: #f39c12;
            text-align: center;
            line-height: 30px; /* Ajuste de línea */
            font-size: 20px; /* Ajuste de tamaño de fuente */
            font-weight: 500;
            color: rgba(32,32,32,0.5);
            box-shadow: inset 0 0 4px #777;
        }

        @keyframes moveCoin {
            0% {
                opacity: 0;
                top: 0;
            }
            19% {
                opacity: 1;
                top: 0;
            }
            21%, 22% {
                top: -3px;
            }
            23%, 24% {
                top: -7px;
            }
            25%, 26% {
                top: -10px;
            }
            27%, 28% {
                top: -15px;
            }
            29%, 30% {
                top: -20px;
            }
            60% {
                top: -20px;
            }
            66% {
                top: -100px;
                opacity: 1;
            }
            67% {
                top: -100px;
                opacity: 0;
            }
            99% {
                top: 0;
                opacity: 0;
            }
            100% {
                opacity: 0;
                top: 0;
            }
        }

        .legs {
            position: absolute;
            bottom: 5px; /* Ajuste de posición */
            left: 30px; /* Ajuste de posición */
            width: 20px; /* Ancho reducido */
            height: 30px; /* Alto reducido */
            display: block;
            background-color: #cb6980;
            border-radius: 3px;
            z-index: 1;
        }

        .legs:after {
            position: absolute;
            content: '';
            bottom: 0;
            left: 0;
            width: 15px; /* Ancho reducido */
            height: 6px; /* Alto reducido */
            display: block;
            background-color: #d88fa0;
            border-bottom-left-radius: 3px;
            border-top-right-radius: 3px;
            z-index: 1;
        }

        .legs.back {
            left: 80px; /* Ajuste de posición */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-piggy-bank"></i> Calculadora de Fechas</h1>
        
        <!-- Cerdo -->
        <div class="piggy-wrapper">
            <div class="piggy-wrap">
                <div class="piggy">
                    <div class="nose"></div>
                    <div class="mouth"></div>
                    <div class="ear"></div>
                    <div class="tail">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <div class="eye"></div>
                    <div class="hole"></div>
                </div>
            </div>
            <div class="coin-wrap">
                <div class="coin">$</div>
            </div>
            <div class="legs"></div>
            <div class="legs back"></div>
        </div>

        <form id="dateForm">
            <div class="form-group">
                <label for="fecha">Ingrese una fecha:</label>
                <input type="date" id="fecha" name="fecha" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-primary btn-block">Calcular</button>
        </form>

        <!-- Modal -->
        <div class="modal fade" id="resultModal" tabindex="-1" role="dialog" aria-labelledby="resultModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="resultModalLabel">Resultados</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <ul class="list-group" id="resultList">
                            <!-- Resultados se insertarán aquí -->
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>&copy; 2023 Calculadora de Fechas para la Granja</p>
        </div>
    </div>

    <!-- Incluir Bootstrap JS y dependencias (opcional) -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function() {
            $('#dateForm').on('submit', function(event) {
                event.preventDefault(); // Evitar el envío del formulario

                // Obtener la fecha ingresada
                const fechaIngresada = $('#fecha').val();
                const fecha = new Date(fechaIngresada);

                if (!isNaN(fecha.getTime())) {
                    // Calcular las fechas
                    const fechaRepeticion = new Date(fecha);
                    fechaRepeticion.setDate(fechaRepeticion.getDate() + 21);
                    
                    const fecha100Dias = new Date(fecha);
                    fecha100Dias.setDate(fecha100Dias.getDate() + 100);

                    const fecha80Dias = new Date(fecha);
                    fecha80Dias.setDate(fecha80Dias.getDate() + 85);

                    const fechaParto = new Date(fecha);
                    fechaParto.setDate(fechaParto.getDate() + 114);

                    // Función para formatear la fecha en español
                    function formatearFechaEnEspañol(fecha) {
                        const dias = ['domingo', 'lunes', 'martes', 'miércoles', 'jueves', 'viernes', 'sábado'];
                        const meses = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];

                        const diaSemana = dias[fecha.getDay()];
                        const diaMes = fecha.getDate();
                        const mes = meses[fecha.getMonth()];
                        const año = fecha.getFullYear();

                        return `${diaSemana}, ${diaMes} de ${mes} de ${año}`;
                    }

                    // Mostrar los resultados en el modal
                    $('#resultList').html('');
                    $('#resultList').append(`<li class="list-group-item result-item">Fecha posible repetición: ${formatearFechaEnEspañol(fechaRepeticion)}</li>`);
                    $('#resultList').append(`<li class="list-group-item result-item">Fecha Purga 100 días: ${formatearFechaEnEspañol(fecha100Dias)}</li>`);
                    $('#resultList').append(`<li class="list-group-item result-item">Fecha Coli: ${formatearFechaEnEspañol(fecha80Dias)}</li>`);
                    $('#resultList').append(`<li class="list-group-item result-item">Fecha de parto: ${formatearFechaEnEspañol(fechaParto)}</li>`);
                    $('#resultModalLabel').text(`Resultados - ${formatearFechaEnEspañol(fecha)}`);
                    $('#resultModal').modal('show');
                } else {
                    alert('La fecha ingresada no es válida.');
                }
            });
        });
    </script>
</body>
</html>
